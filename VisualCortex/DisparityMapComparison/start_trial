#!/bin/bash

TRIAL_NUMBER=0
EXT_0="0.ppm"
EXT_1="1.ppm"
SP="_"

PPM=".ppm"
PNG=".png"

GUARDDOG_LABEL="_guarddog"
LIBELAS_LABEL="_libelas"
OPENCV_LABEL="_opencv"

OPENCV_OPTIONS="--no-display=1 -o"


samples=( flowerpots gddg bowling cloth lampshade1_ middlebury wood aloe tsukuba cones teddy )


for TRIAL_NAME in "${samples[@]}"; do
echo "Executing $TRIAL_NAME test"
# GUARDDOG VISUAL CORTEX PART
time ./stereo_disparity_my_tester 320 240 "$TRIAL_NAME$EXT_0" "$TRIAL_NAME$EXT_1" "$TRIAL_NUMBER$SP$TRIAL_NAME$GUARDDOG_LABEL$PPM"
# OPENCV PART
time ./stereo_disparity_opencv_tester "$TRIAL_NAME$EXT_0" "$TRIAL_NAME$EXT_1" --no-display=1 -o "$TRIAL_NUMBER$SP$TRIAL_NAME$OPENCV_LABEL$PPM"
# LIBELAS PART
time ./elas "$TRIAL_NAME$EXT_0" "$TRIAL_NAME$EXT_1"
mv "$TRIAL_NAME"0_disp.ppm "$TRIAL_NUMBER$SP$TRIAL_NAME$LIBELAS_LABEL$PPM"
rm "$TRIAL_NAME"1_disp.ppm   


convert "$TRIAL_NUMBER$SP$TRIAL_NAME$GUARDDOG_LABEL$PPM" "$TRIAL_NUMBER$SP$TRIAL_NAME$GUARDDOG_LABEL$PNG"
rm "$TRIAL_NUMBER$SP$TRIAL_NAME$GUARDDOG_LABEL$PPM"

convert "$TRIAL_NUMBER$SP$TRIAL_NAME$LIBELAS_LABEL$PPM" "$TRIAL_NUMBER$SP$TRIAL_NAME$LIBELAS_LABEL$PNG"
rm "$TRIAL_NUMBER$SP$TRIAL_NAME$LIBELAS_LABEL$PPM"

convert "$TRIAL_NUMBER$SP$TRIAL_NAME$OPENCV_LABEL$PPM" "$TRIAL_NUMBER$SP$TRIAL_NAME$OPENCV_LABEL$PNG"
rm "$TRIAL_NUMBER$SP$TRIAL_NAME$OPENCV_LABEL$PPM"

(( TRIAL_NUMBER++ ))
done

exit 0
